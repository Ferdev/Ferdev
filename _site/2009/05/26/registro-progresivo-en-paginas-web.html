<!DOCTYPE HTML>
<html>
<head>
  <title>Fernando Espinosa | Freelance ruby and iOS developer. Registro progresivo en paginas web</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <link rel="stylesheet" type="text/css" media="screen" href="/stylesheets/ferdev.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="/stylesheets/animations.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="/stylesheets/glyphs.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="/stylesheets/solarizeddark.css" />
  <meta name="description" content="I'm a freelance ruby and iOS developer based in Madrid, Spain. I love ruby and crafting beautiful apps with it." />
  <meta name="keywords" content="ruby, rails, ruby on rails, iOS, rubymotion, developer, freelance, freelance developer, freelance ruby, freelance rails, freelance ruby on rails, freelance iOS, freelance rubymotion, front-end, back-end, css, css3, javascript, jquery" />
  <link rel="canonical" href="http://www.ferdev.com" />
  <link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="/atom.xml" />
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/rss.xml" />
</head>
<body id="home">
  <header>
  <hgroup>

    <div class="photo">
      <div class="white_border">
      </div>
      <img src="/images/ferdev@2x.png" alt="Fernando Espinosa" width="65" height="65" />
    </div>

    <div class="name">
      <h3>fernando espinosa</h3>
      <h3>freelance ruby developer</h3>
    </div>

  </hgroup>
  <nav>
	<ul id="menu">
		<li><a href="/" title="home">home</a></li>
		<li><a href="/portfolio.html" title="portfolio">portfolio</a></li>
		<li><a href="/about-me.html" title="about me">about me</a></li>
		<li><a href="/hire-me.html" title="hiring me">hire me</a></li>
		<li><a href="/contact-me.html" title="contact">contact</a></li>
    <li class="top"><a href="#home" title="home">up</a></li>
	</ul>
</nav>

</header>

<section class="introduction">
  <div class="balloon_tail_small"></div>
  <div class="balloon_tail_medium"></div>
  <div class="balloon">
    <p class="hi"><strong>Hi!</strong></p>
    <p>
      I'm <strong>Fernando Espinosa</strong>, a <strong>developer</strong> based in Madrid, Spain.<br/>
      I <span>&#x2665;</span> <strong>ruby</strong> and crafting <strong>beautiful</strong> apps with it.
    </p>
  </div>
</section>


  <script type="text/javascript">
  var idcomments_acct = '9485e3d1ca4f30d30b14d9171a8b93b7';
  var idcomments_post_id;
  var idcomments_post_url;
</script>

<article>
  <h1>Registro progresivo en paginas web</h1>
   <a rel="tag" href="/tag/patterns/">patterns</a>&nbsp;

  <p>Como no he tenido mucho tiempo últimamente de cambiar el diseño del blog, pero sí lo tengo para escribir algunos artículos, cambio el tema de wordpress por uno más vistoso hasta que pueda modificar el genérico.</p>

<p>Comienzo hablando de un tema que en mi opinión es muy interesante (y útil), y que no he visto implementado en ningún sitio aún. De hecho aunque los habrá, yo no he visto ninguno. Se trata del registro progresivo de datos en formularios.</p>

<p>¿En qué consiste? Es un patrón de desarrollo, por tanto es aplicable a cualquier tipo de tecnología web, no está atado a ningún framework o lenguaje. Va muy de la mano de la gestión de las cookies, y de un modelo de datos organizado y pensado desde un principio para soportar esta técnica. El objetivo principal de este patrón de desarrollo es evitar una de las barreras de entrada más colosales de cualquier sitio web: el registro de usuarios en un sistema para permitir la interacción del éstos con el mismo. ¿Cuantas veces hemos reculado al entrar a un sitio y ver que tenemos que registrarnos para realizar la acción más sencilla, como comprar en una tienda on-line? Estoy seguro que los sitios con esta barrera de entrada tienen una gran pérdida de usuarios (igual a dinero) por este motivo. Voy a tratar de describir en líneas generales el proceso a seguir para implementarlo y sus desventajas (que las tiene, claro).</p>

<p>Básicamente, el proceso consiste en registrar en algún motor de persistencia (una base de datos en el mayor de los casos) los datos que un usuario no registrado va introduciendo en el mismo a lo largo del tiempo y sus sucesivas visitas. Es decir, un día un usuario entra a la web, introduce su dirección para una cosa, otro día vuelve a entrar e introduce su fecha de nacimiento, y así sucesivamente. La clave del patrón está en registrar esa información y tenerla disponible para el usuario para que, en caso de que algún día se decida a formalizar su registro en la web, ofrecerle toda esa información que el usuario ha ido acumulando en su interacción con el sitio. De este modo, el usuario llegado a ese punto, sólo tiene que introducir los datos obligatorios para realizar el registro (por ejemplo, email y contraseña) y automáticamente su perfil queda creado junto con los datos que el usuario fue introduciendo. Es una ventaja para la página web, porque cuenta con un conjunto de datos de los usuarios no registrados que de otra forma no tendría, y una ventaja para el usuario porque facilita enormemente su interacción con el sitio.</p>

<p>Pero, todo hay que decirlo, esta técnica tiene sus inconvenientes, y parte de algunas premisas que no se pueden dar en todos los sistemas. En primer lugar, para poder hacer uso de esta técnica, el navegador del usuario que se conecta debe tener las cookies habilitadas. Sin esta primera condición es imposible montarlo. O mejor dicho, yo no sabría cómo hacerlo. Se podría hacer registrando la dirección IP del usuario que se conecta, pero teniendo en cuenta que en España la gran mayoría de los usuarios utilizan ADSL&#8217;s con ip dinámica, no veo esta opción factible.  Por otro lado, el uso de cookies es la principal debilidad de esta técnica. Las cookies tienen una fecha de caducidad. E incluso antes de que se consuma esta fecha, el usuario puede perfectamente hacer una limpieza de sus cookies, con lo que perdemos el enlace del usuario con los datos que ha ido almacenando en el sitio. Y este problema nos lleva al siguiente: cuando un usuario borra o pierde su cookie del sitio web, y se nos quedan todos sus datos huérfanos, están ocupando un espacio valiosísimo en el motor de persistencia, que habrá que borrar de alguna manera.</p>

<p>A pesar de los problemas, me parece una técnica muy interesante como para dejarla de lado. ¿Qué porcentaje de usuarios tiene las cookies desactivadas en su navegador? No sé cual es la estadística, pero estoy seguro que no es muy elevada. Además, ¿qué problema hay si el usuario no las tiene? Símplemente no podrá usar esta funcionalidad, y por otro lado tendríamos una gran cantidad de usuarios (los que sí tienen las cookies activadas) haciendo uso de ella. Se le podría aconsejar que las active llegados a ese punto si así lo creyesen necesario los desarrolladores. Y respecto al borrado de los datos huérfanos&#8230; Tampoco es problema llevar un registro de las cookies que llevan más tiempo sin usarse y hacer una limpieza de datos cada X tiempo. Cuestión de sopesar los pros y los contras.</p>

<p>Entrando más en detalle de susodicha técnica, creo que lo mejor es poner un ejemplo que es como mejor se entienden las cosas. Pongamos como ídem una tienda de comercio electrónico, con su carrito de la compra y su formulario de registro final. Sin emplear este patrón, el proceso de compra para el usuario sería:</p>

<ol>
<li>
<p>El usuario agrega un producto al carrito, y pulsa en &#8220;formalizar compra&#8221; para proceder a su pago.</p>
</li>

<li>
<p>El sitio web necesita saber a quién y a dónde enviar el producto, por lo que le muestra dos formularios (generalmente) según el caso:</p>

<ol>
<li>Formulario sin registro: el usuario introduce sus datos y su dirección ya que no está registrado, y así el sistema obtiene sus datos.</li>

<li>Formulario con registro: el usuario ya está registrado en el sitio, introduce su usuario y password, y el sistema ya tiene sus datos para realizar la compra.</li>
</ol>
</li>

<li>
<p>Ya con los datos del usuario, la web muestra el formulario de pago y la compra finaliza (el usuario a pesar de la crisis tiene mucha pasta, y finaliza la compra sin problemas:D).</p>
</li>
</ol>

<p>Ahora, empleando el nuevo patron:</p>

<ol>
<li>
<p>Un usuario entra al sitio web. Se busca una cookie en la cual hemos guardado su identificador de usuario.</p>

<ol>
<li>Si no encontramos la cookie, creamos un usuario nuevo en la base de datos, vacío, pero con una clave primaria única. Con esta clave primaria única, creamos una nueva cookie y guardaremos este identificador en ella.</li>

<li>Si encontramos la cookie, buscamos en la base de datos el identificador de usuario almacenado en la misma. De este modo hemos recuperado los datos de un usuario de la base de datos.</li>
</ol>
</li>

<li>
<p>El usuario navega por la tienda, y decide añadir un producto al carrito. Luego le da a &#8220;formalizar compra&#8221; porque no quiere nada más, que está la vida muy cara.</p>
</li>

<li>
<p>Le presentamos el formulario de contacto al usuario, y aquí es donde entran en juego las bondades de esta técnica.</p>

<ol>
<li>El usuario es asiduo comprador de nuestra tienda, ha realizado otras compras y tenemos todos los datos que ha introducido anteriormente en la base de datos. Como hemos recuperado la instancia del usuario en el primer paso, se los mostramos por si quiere validarlos o corregir algo. Al usuario símplemente le queda introducir sus datos de pago si es necesario, y el proceso ha finalizado.</li>

<li>El usuario no había comprado nunca, por lo que rellena los datos del formulario necesarios para poder realizar el pedido. Estos datos, se guardan en la base de datos contra el usuario que hemos recuperado en el paso uno. Si el usuario vuelve a entrar alguna vez a la tienda y su cookie sigue existiendo (lo más probable, en mi humilde opinión), podremos recuperar su identificador de usuario y mostrarle sus datos.</li>
</ol>
</li>

<li>
<p>El usuario sin registrar vuelve al cabo de los dias, hace otra compra y decide registrarse en la tienda (para beneficiarse de unos vales de descuento disponibles sólo para usuarios registrados, por ejemplo). Nada más tendrá que introducir su email y contraseña (o los datos que sean necesarios para el registro) y quedará registrado.</p>
</li>
</ol>

<p>Quizá se pueda poner un ejemplo más correcto del uso de esta técnica, pero creo que la idea se capta. En mi opinión es para tenerla en consideración, y si además la complementamos con algún sistema de identificación como OAuth o Facebook Connect, creo que puede llegar a ser una herramienta muy poderosa.</p>

<p>Más adelante escribiré un post sobre su implementación en una web desarrollada con Ruby on Rails.</p>

  <div class="date">
    <hr />
    <span>May 26, 2009</span>
    <hr />
  </div>

  <div id="comments">

    <!-- START: Livefyre Embed -->
    <div id="livefyre-comments"></div>
    <script type="text/javascript" src="http://zor.livefyre.com/wjs/v3.0/javascripts/livefyre.js"></script>
    <script type="text/javascript">
    (function () {
        var articleId = fyre.conv.load.makeArticleId(null);
        fyre.conv.load({}, [{
            el: 'livefyre-comments',
            network: "livefyre.com",
            siteId: "323683",
            articleId: articleId,
            signed: false,
            collectionMeta: {
                articleId: articleId,
                url: fyre.conv.load.makeCollectionUrl(),
            }
        }], function() {});
    }());
    </script>
    <!-- END: Livefyre Embed -->

  </div>
</article>


  <footer>
    Check the <a href="http://github.com/ferdev/ferdev">source code of this site on Github</a>.

  </footer>
  <script type="text/javascript" src="/javascripts/modernizer.js"></script>
<script type="text/javascript" src="/javascripts/ferdev.js"></script>
<script type="text/javascript" src="//use.typekit.net/jud5abl.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
<script type="text/javascript">
	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
	try {
		var pageTracker = _gat._getTracker("UA-6392398-3");
		pageTracker._trackPageview();
	} catch(err) {}
</script>

</body>
</html>
