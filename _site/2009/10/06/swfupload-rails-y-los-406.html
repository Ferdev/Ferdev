<!DOCTYPE HTML>
<html>
<head>
	<title>Freelance Ruby on Rails developer. SWFUpload, Rails y los 406</title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<link rel="stylesheet" type="text/css" media="screen" href="/stylesheets/style.css" />
	<meta name="description" content="I'm a freelance web developer, specialized in Ruby on Rails, jQuery, user interfaces and usability." />
	<meta name="keywords" content="ruby on rails, jquery, usability, html, css, css2, css3, javascript" />
	<link rel="canonical" href="http://www.ferdev.com/" />
</head>
<body>
	<header class="dark">
		<hgroup>
			<h1><a class="title" href="/" title="Home" rel="home"><img src="/images/logo.gif" alt="ferdev.com" width="59" height="59" />Ferdev</a></h1>
			<h3>Freelance Ruby on Rails developer</h3>
		</hgroup>			
	</header>
	<nav>
		<ul id="menu">
			<li><a href="#blog" title="Portfolio">Blog</a></li>
			<li><a href="#portfolio" title="Portfolio">Portfolio</a></li>
			<li><a href="#about" title="About me">About me</a></li>
			<li><a href="#contact" title="Contact">Contact</a></li>
		</ul>		
	</nav>
	<section id="blog" class="articles dark">
		<article>
	<h1>
	    <a href="">SWFUpload, Rails y los 406</a>
	</h1>
	<span class="date">
		Oct 06, 2009 in <a rel="category tag" title="View all posts in " href="//"></a>
	</span>

	En una aplicación que tenía funcionando en Snow Leopard con SWFUpload para subir imágenes al servidor, y RoR en el lado del servidor, me estaba dando problemas al realizar los uploads desde Internet Explorer 8. En concreto, el servidor me devolvía un error 406 tras haber guardado la imagen y justo antes de realizar la respuesta al navegador(en formato json). El error 406 se produce cuando desde el servidor se está respondiendo a una solicitud con un tipo MIME que no está soportado dentro de la cabecera ACCEPT que envió el navegador. El servidor no sabe qué hacer con la solicitud, y lanza ese error.

Bien, pues se produce en concreto con IE8 en Windows XP porque SWFUpload envía como único tipo MIME en su cabecera ACCEPT el tipo "text/*". Imagino que es un problema con el plugin de Flash de Windows (Flash 10 estaba usando), y que si lo pruebo con otro navegador en Windows sucederá lo mismo, no lo he probado.

Para solucionarlo, en primer lugar deberemos añadir un nuevo tipo MIME al environment.rb de nuestro proyecto:

	Mime::Type.register "text/*", :all_text

Luego, en la acción en la que estemos guardando la imagen, tenemos que añadir un nuevo manejador de este tipo de peticiones:

	respond_to do |format|
		format.all_text{ render :text => text_to_render }
	end

Y eso es todo, con esto Internet Explorer 8 debería estar recibiendo el resultado de la subida de una imagen con SWFUpload.


	Tags:  <a rel="tag" href="/tag/rails/">rails</a>&nbsp; <a rel="tag" href="/tag/ruby/">ruby</a>&nbsp; <a rel="tag" href="/tag/flash/">flash</a>&nbsp; <a rel="tag" href="/tag/swfupload/">swfupload</a>&nbsp;
</article>
	</section>
	<section id="portfolio" class="light">
		<div class="content">
	<h1 id="my_portfolio.">My portfolio.</h1>
	<p>
	These are the projects I've been working on lately:
	</p>
	<ul id="portfolio_projects">
		<li class="project">
			<h3>Loovrs.com</h3>
			<div>
				<img src="/images/portfolio/loovrs.jpg" alt="Loovrs" title="Loovrs"/>
				<ul class="project_data">
					<li>Dating site</li>
					<li>xhtml / css / jQuery / Ruby on Rails</li>
					<li><a href="http://www.loovrs.com" rel="loovrs.com">http://www.loovrs.com</a></li>
				</ul>
			</div>		
		</li>
		<li class="project">
			<h3>FerDev.com</h3>
			<div>
				<img src="/images/portfolio/ferdev.jpg" alt="FerDev" title="FerDev"/>
				<ul class="project_data">
					<li>Wordpress theme</li>
					<li>xhtml / css / jQuery / php</li>
					<li><a href="http://www.ferdev.com" rel="ferdev.com">http://www.ferdev.com</a></li>
				</ul>
			</div>		
		</li>
	</ul>
</div>

	</section>
	<section id="about" class="dark">
		<div class="content">
	<h1 id="about_me">About me.</h1>

	<h2 id="who_am_i">Who am I?</h2>

	<p>My name is Fernando Espinosa, a <a href="http://maps.google.com/maps?f=q&amp;source=s_q&amp;hl=es&amp;geocode=&amp;q=madrid,+spain&amp;sll=37.0625,-95.677068&amp;sspn=51.621706,91.318359&amp;ie=UTF8&amp;hq=&amp;hnear=Madrid,+Comunidad+de+Madrid,+Espa%C3%B1a&amp;z=11">spanish</a> guy passionate with web development and specialized in usability.</p>

	<h2 id="where_do_i_came_from">Where do I came from?</h2>

	<p>I have been developing software professionally for more than ten years. My career goes through companies like Soluziona or <a href="http://www.indra.es" title="Indra">Indra</a> amongst others. You can see my resume at <a href="http://www.xing.com/profile/Fernando_EspinosaJimenez" title="Fernando Espinosa Jiménez"><img src="/images/icons/social/xing.png" alt="Xing - Fernando Espinosa" /></a><a href="http://www.xing.com/profile/Fernando_EspinosaJimenez" title="Fernando Espinosa Jiménez">Xing</a> or <a href="http://es.linkedin.com/in/fernandoespinosajimenez" title="Fernando Espinosa Jiménez"><img src="/images/icons/social/linkedin.png" alt="Linked In - Fernando Espinosa" /></a><a href="http://es.linkedin.com/in/fernandoespinosajimenez" title="Fernando Espinosa Jiménez">Xing</a>.</p>

	<h2 id="what_do_i_do">What do I do?</h2>

	<p>I develop web applications using agile methodologies and focusing on its usability. I do my best efforts creating clean, appealing and easy to use user interfaces. Without neglecting application features, of course.</p>

	<h2 id="how_do_i_do_it">How do I do it?</h2>

	<p>With the help of <a href="http://agilemanifesto.org/">agile methodologies</a>, prototyping since development starts and a fluent communication with the client, so I can respond his expectations and needs any time.</p>

	<h2 id="what_tools_do_i_use">What tools do I use?</h2>

	<p>These are the ones which I feel more comfortable with:</p>

	<ul>
	<li><a href="http://rubyonrails.org/">Ruby on Rails</a></li>
	<li><a href="http://jquery.com/">jQuery</a></li>
	<li>HTML</li>
	<li>CSS2 and CSS3</li>
	<li>Mac OSX or Gentoo</li>
	</ul>

	<p>Sorry, but I'm not interested in Java or PHP projects ;-).</p>

	<h2 id="about_hiring_me">About hiring me.</h2>

	<p>Do you need a freelance web developer and my profile has interested you? <a href="/contact/">Tell me</a> your needs and I&#8217;ll give you all details posible and a budget if needed.</p>

</div>
	</section>
	<section id="contact" class="light">
		<div class="content">
	<h1 id="contact_me!">Contact Me!</h1>
	<p>Feel free to contact me for anything you might need from me!</p>
	<ul>
		<li>Send me an email to <a href="mailto:fer@ferdev.com">fer@ferdev.com</a>.</li>
		<li><a href="http://twitter.com/ferdev">Follow me</a> on twitter.</li>
		<li>Or drop me a few lines:<br />
			[contact-form 1 "Contact form"]
		</li>
	</ul>
</div>
	</section>
	<footer class="dark">
		<div class="content">
	<ul>
		<li>Designed by <a href="/" title="ferdev.com">ferdev.com</a>.</li>
		<li>Social icons by <a href="http://www.komodomedia.com/" title="Komodo Media">Komodo Media</a>.</li>
		<li>Blog <a href="http://github.com/ferdev/ferdev">source</a>.</li>
	</ul>
	<span>Copyright © 2010 Fernando Espinosa</span>
</div>
	</footer>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="/javascripts/lib/jquery.easing.js" type="text/javascript" charset="utf-8"></script>
	<script src="/javascripts/ferdev.init.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" charset="utf-8">
		var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
		document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<script type="text/javascript" charset="utf-8">
		try {
			var pageTracker = _gat._getTracker("UA-6392398-3");
			pageTracker._trackPageview();
		} catch(err) {}
	</script>
</body>
</html>