<!DOCTYPE HTML>
<html>
<head>
  <title>Fernando Espinosa | Freelance ruby and iOS developer. </title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <link rel="stylesheet" type="text/css" media="screen" href="/stylesheets/ferdev.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="/stylesheets/animations.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="/stylesheets/glyphs.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="/stylesheets/solarizeddark.css" />
  <meta name="description" content="I'm a freelance ruby and iOS developer based in Madrid, Spain. I love ruby and crafting beautiful apps with it." />
  <meta name="keywords" content="ruby, rails, ruby on rails, iOS, rubymotion, developer, freelance, freelance developer, freelance ruby, freelance rails, freelance ruby on rails, freelance iOS, freelance rubymotion, front-end, back-end, css, css3, javascript, jquery" />
  <link rel="canonical" href="http://www.ferdev.com" />
  <link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="/atom.xml" />
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/rss.xml" />
</head>
<body id="home">
  <header>
  <hgroup>

    <div class="photo">
      <div class="white_border">
      </div>
      <img src="/images/ferdev@2x.png" alt="Fernando Espinosa" width="65" height="65" />
    </div>

    <div class="name">
      <h3>fernando espinosa</h3>
      <h3>freelance ruby developer</h3>
    </div>

  </hgroup>
  <nav>
	<ul id="menu">
		<li><a href="/" title="home">home</a></li>
		<li><a href="/portfolio.html" title="portfolio">portfolio</a></li>
		<li><a href="/about-me.html" title="about me">about me</a></li>
		<li><a href="/hire-me.html" title="hiring me">hire me</a></li>
		<li><a href="/contact-me.html" title="contact">contact</a></li>
    <li class="top"><a href="#home" title="home">up</a></li>
	</ul>
</nav>

</header>

<section class="introduction">
  <div class="balloon_tail_small"></div>
  <div class="balloon_tail_medium"></div>
  <div class="balloon">
    <p class="hi"><strong>Hi!</strong></p>
    <p>
      I'm <strong>Fernando Espinosa</strong>, a <strong>developer</strong> based in Madrid, Spain.<br/>
      I <span>&#x2665;</span> <strong>ruby</strong> and crafting <strong>beautiful</strong> apps with it.
    </p>
  </div>
</section>


  <section class="articles">
  
  <article>
    <h1>
      <a href="/2009/10/31/plugin-jquery-para-obtener-dimensiones-de-un-objeto.html">Plugin jQuery para obtener dimensiones de un objeto</a>
    </h1>

    <p>Hola!</p>

<p>Hace mucho que no escribo por aquí, no dispongo de demasiado tiempo&#8230; Como podéis ver, cuando saco unos minutos voy haciendo pruebas de diseño con el blog. Tengo intención de pasarlo a HTML5, usar CSS3 al máximo e intentar usar el menor número de imágenes posibles, a ver si lo consigo :D Bueno, al grano.</p>

<p>Trabajando en un proyecto me surgió la necesidad una vez de conocer las dimensiones (alto y ancho) de unos objetos ocultos que luego estaba agregando a otros elementos del DOM de mi página. El problema es que por diversas razones, necesitaba conocer su tamaño antes de agregarlos al objeto DOM, y jQuery, aunque cuenta con unos maravillosos métodos para obtener el tamaño de cualquier objeto (tanto tamaño exterior, contando el ancho de los bordes y demás, como el tamaño interior del objeto, sin bordes ni nada). El problema, es que si el objeto está oculto (display: none), jQuery no puede calcular el tamaño y te devolverá cero.</p>

<p>Hay una solución muy sencilla para esto. Agregas el objeto con el tamaño a calcular a una capa que tendremos posicionada en modo &#8220;absolute&#8221; y fuera de la vista del usuario (fuera del viewport del navegador), dándole una posición &#8220;left: -1000px&#8221; (por ejemplo). Así, el objeto no es necesario que esté oculto, jQuery podrá calcular sus dimensiones y no lo tendrás dentro del flujo de la página, por lo que no te descolocará nada.</p>

<p>Aquí os dejo el código del plugin, tal y como lo vengo usando en mi proyecto. Espero que os sea útil!</p>
<div class='highlight'><pre><code class='javascript'><span class='p'>;(</span><span class='kd'>function</span><span class='p'>(</span><span class='nx'>$</span><span class='p'>){</span>
<span class='nx'>$</span><span class='p'>.</span><span class='nx'>fn</span><span class='p'>.</span><span class='nx'>objectSize</span> <span class='o'>=</span> <span class='kd'>function</span><span class='p'>(){</span>

    <span class='kd'>function</span> <span class='nx'>calculateSize</span><span class='p'>(</span><span class='nx'>domNode</span><span class='p'>){</span>
        <span class='kd'>var</span> <span class='nx'>divSizer</span> <span class='o'>=</span> <span class='nx'>$</span><span class='p'>(</span><span class='nb'>document</span><span class='p'>.</span><span class='nx'>createElement</span><span class='p'>(</span><span class='s2'>&quot;div&quot;</span><span class='p'>))</span>
        <span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span><span class='s2'>&quot;id&quot;</span><span class='p'>,</span> <span class='s2'>&quot;sizer&quot;</span><span class='p'>)</span>
        <span class='p'>.</span><span class='nx'>css</span><span class='p'>({</span>           
            <span class='nx'>width</span><span class='o'>:</span> <span class='s1'>&#39;100%&#39;</span><span class='p'>,</span>
            <span class='nx'>height</span><span class='o'>:</span> <span class='s1'>&#39;100%&#39;</span><span class='p'>,</span>
            <span class='nx'>position</span><span class='o'>:</span> <span class='s1'>&#39;absolute&#39;</span><span class='p'>,</span>
            <span class='nx'>left</span><span class='o'>:</span> <span class='s1'>&#39;-10000px&#39;</span> 
        <span class='p'>}).</span><span class='nx'>appendTo</span><span class='p'>(</span><span class='s1'>&#39;body&#39;</span><span class='p'>),</span>
        <span class='nx'>size</span> <span class='o'>=</span> <span class='p'>{</span><span class='nx'>width</span><span class='o'>:</span> <span class='mi'>0</span><span class='p'>,</span> <span class='nx'>height</span><span class='o'>:</span> <span class='mi'>0</span><span class='p'>};</span>
    
        <span class='nx'>divSizer</span><span class='p'>.</span><span class='nx'>append</span><span class='p'>(</span><span class='nx'>domNode</span><span class='p'>);</span>
        <span class='nx'>size</span><span class='p'>.</span><span class='nx'>width</span> <span class='o'>=</span> <span class='nb'>parseInt</span><span class='p'>(</span><span class='nx'>domNode</span><span class='p'>.</span><span class='nx'>outerWidth</span><span class='p'>());</span>
        <span class='nx'>size</span><span class='p'>.</span><span class='nx'>height</span> <span class='o'>=</span> <span class='nb'>parseInt</span><span class='p'>(</span><span class='nx'>domNode</span><span class='p'>.</span><span class='nx'>outerHeight</span><span class='p'>());</span>
        <span class='nx'>divSizer</span><span class='p'>.</span><span class='nx'>remove</span><span class='p'>();</span>
        <span class='k'>delete</span> <span class='nx'>divSizer</span><span class='p'>;</span>
        <span class='k'>return</span> <span class='nx'>size</span><span class='p'>;</span>
    <span class='p'>}</span>

    <span class='k'>return</span> <span class='nx'>calculateSize</span><span class='p'>(</span><span class='nx'>$</span><span class='p'>(</span><span class='k'>this</span><span class='p'>[</span><span class='mi'>0</span><span class='p'>]));</span>
<span class='p'>};</span>
<span class='p'>})(</span><span class='nx'>jQuery</span><span class='p'>);</span>
</code></pre></div>

    <div class="date">
      <hr />
      <span>Oct 31, 2009</span>
      <hr />
    </div>
  </article>
  
  <article>
    <h1>
      <a href="/2009/10/06/swfupload-rails-y-los-406.html">SWFUpload, Rails y los 406</a>
    </h1>

    <p>En una aplicación que tenía funcionando en Snow Leopard con SWFUpload para subir imágenes al servidor, y RoR en el lado del servidor, me estaba dando problemas al realizar los uploads desde Internet Explorer 8. En concreto, el servidor me devolvía un error 406 tras haber guardado la imagen y justo antes de realizar la respuesta al navegador(en formato json). El error 406 se produce cuando desde el servidor se está respondiendo a una solicitud con un tipo MIME que no está soportado dentro de la cabecera ACCEPT que envió el navegador. El servidor no sabe qué hacer con la solicitud, y lanza ese error.</p>

<p>Bien, pues se produce en concreto con IE8 en Windows XP porque SWFUpload envía como único tipo MIME en su cabecera ACCEPT el tipo &#8220;text/*&#8221;. Imagino que es un problema con el plugin de Flash de Windows (Flash 10 estaba usando), y que si lo pruebo con otro navegador en Windows sucederá lo mismo, no lo he probado.</p>

<p>Para solucionarlo, en primer lugar deberemos añadir un nuevo tipo MIME al environment.rb de nuestro proyecto:</p>
<div class='highlight'><pre><code class='ruby'><span class='ss'>Mime</span><span class='p'>:</span><span class='ss'>:Type</span><span class='o'>.</span><span class='n'>register</span> <span class='s2'>&quot;text/\*&quot;</span><span class='p'>,</span> <span class='ss'>:all_text</span>
</code></pre></div>
<p>Luego, en la acción en la que estemos guardando la imagen, tenemos que añadir un nuevo manejador de este tipo de peticiones:</p>
<div class='highlight'><pre><code class='ruby'><span class='n'>respond_to</span> <span class='k'>do</span> <span class='o'>|</span><span class='nb'>format</span><span class='o'>|</span>
	<span class='nb'>format</span><span class='o'>.</span><span class='n'>all_text</span><span class='p'>{</span> <span class='n'>render</span> <span class='ss'>:text</span> <span class='o'>=&gt;</span> <span class='n'>text_to_render</span> <span class='p'>}</span>
<span class='k'>end</span>
</code></pre></div>
<p>Y eso es todo, con esto Internet Explorer 8 debería estar recibiendo el resultado de la subida de una imagen con SWFUpload.</p>

    <div class="date">
      <hr />
      <span>Oct 06, 2009</span>
      <hr />
    </div>
  </article>
  
  <article>
    <h1>
      <a href="/2009/05/26/registro-progresivo-en-paginas-web.html">Registro progresivo en paginas web</a>
    </h1>

    <p>Como no he tenido mucho tiempo últimamente de cambiar el diseño del blog, pero sí lo tengo para escribir algunos artículos, cambio el tema de wordpress por uno más vistoso hasta que pueda modificar el genérico.</p>

<p>Comienzo hablando de un tema que en mi opinión es muy interesante (y útil), y que no he visto implementado en ningún sitio aún. De hecho aunque los habrá, yo no he visto ninguno. Se trata del registro progresivo de datos en formularios.</p>

<p>¿En qué consiste? Es un patrón de desarrollo, por tanto es aplicable a cualquier tipo de tecnología web, no está atado a ningún framework o lenguaje. Va muy de la mano de la gestión de las cookies, y de un modelo de datos organizado y pensado desde un principio para soportar esta técnica. El objetivo principal de este patrón de desarrollo es evitar una de las barreras de entrada más colosales de cualquier sitio web: el registro de usuarios en un sistema para permitir la interacción del éstos con el mismo. ¿Cuantas veces hemos reculado al entrar a un sitio y ver que tenemos que registrarnos para realizar la acción más sencilla, como comprar en una tienda on-line? Estoy seguro que los sitios con esta barrera de entrada tienen una gran pérdida de usuarios (igual a dinero) por este motivo. Voy a tratar de describir en líneas generales el proceso a seguir para implementarlo y sus desventajas (que las tiene, claro).</p>

<p>Básicamente, el proceso consiste en registrar en algún motor de persistencia (una base de datos en el mayor de los casos) los datos que un usuario no registrado va introduciendo en el mismo a lo largo del tiempo y sus sucesivas visitas. Es decir, un día un usuario entra a la web, introduce su dirección para una cosa, otro día vuelve a entrar e introduce su fecha de nacimiento, y así sucesivamente. La clave del patrón está en registrar esa información y tenerla disponible para el usuario para que, en caso de que algún día se decida a formalizar su registro en la web, ofrecerle toda esa información que el usuario ha ido acumulando en su interacción con el sitio. De este modo, el usuario llegado a ese punto, sólo tiene que introducir los datos obligatorios para realizar el registro (por ejemplo, email y contraseña) y automáticamente su perfil queda creado junto con los datos que el usuario fue introduciendo. Es una ventaja para la página web, porque cuenta con un conjunto de datos de los usuarios no registrados que de otra forma no tendría, y una ventaja para el usuario porque facilita enormemente su interacción con el sitio.</p>

<p>Pero, todo hay que decirlo, esta técnica tiene sus inconvenientes, y parte de algunas premisas que no se pueden dar en todos los sistemas. En primer lugar, para poder hacer uso de esta técnica, el navegador del usuario que se conecta debe tener las cookies habilitadas. Sin esta primera condición es imposible montarlo. O mejor dicho, yo no sabría cómo hacerlo. Se podría hacer registrando la dirección IP del usuario que se conecta, pero teniendo en cuenta que en España la gran mayoría de los usuarios utilizan ADSL&#8217;s con ip dinámica, no veo esta opción factible.  Por otro lado, el uso de cookies es la principal debilidad de esta técnica. Las cookies tienen una fecha de caducidad. E incluso antes de que se consuma esta fecha, el usuario puede perfectamente hacer una limpieza de sus cookies, con lo que perdemos el enlace del usuario con los datos que ha ido almacenando en el sitio. Y este problema nos lleva al siguiente: cuando un usuario borra o pierde su cookie del sitio web, y se nos quedan todos sus datos huérfanos, están ocupando un espacio valiosísimo en el motor de persistencia, que habrá que borrar de alguna manera.</p>

<p>A pesar de los problemas, me parece una técnica muy interesante como para dejarla de lado. ¿Qué porcentaje de usuarios tiene las cookies desactivadas en su navegador? No sé cual es la estadística, pero estoy seguro que no es muy elevada. Además, ¿qué problema hay si el usuario no las tiene? Símplemente no podrá usar esta funcionalidad, y por otro lado tendríamos una gran cantidad de usuarios (los que sí tienen las cookies activadas) haciendo uso de ella. Se le podría aconsejar que las active llegados a ese punto si así lo creyesen necesario los desarrolladores. Y respecto al borrado de los datos huérfanos&#8230; Tampoco es problema llevar un registro de las cookies que llevan más tiempo sin usarse y hacer una limpieza de datos cada X tiempo. Cuestión de sopesar los pros y los contras.</p>

<p>Entrando más en detalle de susodicha técnica, creo que lo mejor es poner un ejemplo que es como mejor se entienden las cosas. Pongamos como ídem una tienda de comercio electrónico, con su carrito de la compra y su formulario de registro final. Sin emplear este patrón, el proceso de compra para el usuario sería:</p>

<ol>
<li>
<p>El usuario agrega un producto al carrito, y pulsa en &#8220;formalizar compra&#8221; para proceder a su pago.</p>
</li>

<li>
<p>El sitio web necesita saber a quién y a dónde enviar el producto, por lo que le muestra dos formularios (generalmente) según el caso:</p>

<ol>
<li>Formulario sin registro: el usuario introduce sus datos y su dirección ya que no está registrado, y así el sistema obtiene sus datos.</li>

<li>Formulario con registro: el usuario ya está registrado en el sitio, introduce su usuario y password, y el sistema ya tiene sus datos para realizar la compra.</li>
</ol>
</li>

<li>
<p>Ya con los datos del usuario, la web muestra el formulario de pago y la compra finaliza (el usuario a pesar de la crisis tiene mucha pasta, y finaliza la compra sin problemas:D).</p>
</li>
</ol>

<p>Ahora, empleando el nuevo patron:</p>

<ol>
<li>
<p>Un usuario entra al sitio web. Se busca una cookie en la cual hemos guardado su identificador de usuario.</p>

<ol>
<li>Si no encontramos la cookie, creamos un usuario nuevo en la base de datos, vacío, pero con una clave primaria única. Con esta clave primaria única, creamos una nueva cookie y guardaremos este identificador en ella.</li>

<li>Si encontramos la cookie, buscamos en la base de datos el identificador de usuario almacenado en la misma. De este modo hemos recuperado los datos de un usuario de la base de datos.</li>
</ol>
</li>

<li>
<p>El usuario navega por la tienda, y decide añadir un producto al carrito. Luego le da a &#8220;formalizar compra&#8221; porque no quiere nada más, que está la vida muy cara.</p>
</li>

<li>
<p>Le presentamos el formulario de contacto al usuario, y aquí es donde entran en juego las bondades de esta técnica.</p>

<ol>
<li>El usuario es asiduo comprador de nuestra tienda, ha realizado otras compras y tenemos todos los datos que ha introducido anteriormente en la base de datos. Como hemos recuperado la instancia del usuario en el primer paso, se los mostramos por si quiere validarlos o corregir algo. Al usuario símplemente le queda introducir sus datos de pago si es necesario, y el proceso ha finalizado.</li>

<li>El usuario no había comprado nunca, por lo que rellena los datos del formulario necesarios para poder realizar el pedido. Estos datos, se guardan en la base de datos contra el usuario que hemos recuperado en el paso uno. Si el usuario vuelve a entrar alguna vez a la tienda y su cookie sigue existiendo (lo más probable, en mi humilde opinión), podremos recuperar su identificador de usuario y mostrarle sus datos.</li>
</ol>
</li>

<li>
<p>El usuario sin registrar vuelve al cabo de los dias, hace otra compra y decide registrarse en la tienda (para beneficiarse de unos vales de descuento disponibles sólo para usuarios registrados, por ejemplo). Nada más tendrá que introducir su email y contraseña (o los datos que sean necesarios para el registro) y quedará registrado.</p>
</li>
</ol>

<p>Quizá se pueda poner un ejemplo más correcto del uso de esta técnica, pero creo que la idea se capta. En mi opinión es para tenerla en consideración, y si además la complementamos con algún sistema de identificación como OAuth o Facebook Connect, creo que puede llegar a ser una herramienta muy poderosa.</p>

<p>Más adelante escribiré un post sobre su implementación en una web desarrollada con Ruby on Rails.</p>

    <div class="date">
      <hr />
      <span>May 26, 2009</span>
      <hr />
    </div>
  </article>
  
  <article>
    <h1>
      <a href="/2009/05/08/paso-1-wordpress-instalado.html">Paso 1: wordpress instalado</a>
    </h1>

    <p>Empiezo las andanzas en el mundo &#8220;blogueril&#8221; personal. Me llamo Fer, y en este blog intentaré transmitir lo mejor que pueda los conocimientos que he ido adquiriendo a lo largo de mi vida en el mundo del desarrollo de software (y un poquito de diseño también, pero poco, que no es lo mío).</p>

<p>Como primer paso he conseguido un dominio, un servidor y la última versión de <a href='http://wordpress.org/' title='wordpress'>wordpress 2.7.1</a>.</p>

<p>Poco a poco, iré implementando mi propio tema de wordpress. Para ello, parto de la base del tema <a href='http://carringtontheme.com/' title='Carrington Jam'>Carrington Jam</a>, tema especialmente pensado para modificarlo a gusto del consumidor. Para realizar este tema, principalmente utilizaré el framework javascript <a href='http://www.jquery.com/' title='jQuery 1.3.2.'>jQuery 1.3.2</a>, mi favorito de entre todos los actuales.</p>

<p>Falta algún plugin, publicidad para sobrellevar la crisis, añadir mi cuenta de twitter&#8230; Poco a poco iré actualizando.</p>

<p>Bienvenidos :-)</p>

    <div class="date">
      <hr />
      <span>May 08, 2009</span>
      <hr />
    </div>
  </article>
  

  

</section>

  <footer>
    Check the <a href="http://github.com/ferdev/ferdev">source code of this site on Github</a>.

  </footer>
  <script type="text/javascript" src="/javascripts/modernizer.js"></script>
<script type="text/javascript" src="/javascripts/ferdev.js"></script>
<script type="text/javascript" src="//use.typekit.net/jud5abl.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
<script type="text/javascript">
	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
	try {
		var pageTracker = _gat._getTracker("UA-6392398-3");
		pageTracker._trackPageview();
	} catch(err) {}
</script>

</body>
</html>
